#include "@CMAKE_CURRENT_SOURCE_DIR@/protobuf_locator.h"

extern void replaceString(std::string& subject, const std::string& search, const std::string& replace);

std::string getProtobufIncludeDirectory()
{
  static const std::string location = "@PROTOBUF_INCLUDE_DIRS@";
  return location;
}

std::string getProtoCompilerPath()
{
  static const std::string location = "@PROTOC_LOCATION@";
  return location;
}

std::string getProtoCompilerDirectory()
{
  std::string path = getProtoCompilerPath();

#ifdef _WIN32
  const char path_separator = '\\';
  const std::string path_separator_str = "\\";
#else
  const char path_separator = '/';
  const std::string path_separator_str = "/";
#endif

  //correct path separator since the path was generated by cmake which uses '/' on all platforms
  replaceString(path, "/", path_separator_str);


  std::string dir;

  //search for the last path_separator location
  size_t pos = path.find_last_of(path_separator);
  if (pos != std::string::npos)
  {
    //remove directory from path
    dir = path.substr(0, pos);
  }
  else
  {
    dir = path;
  }

  return dir;
}
